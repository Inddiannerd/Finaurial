{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import axios from'../utils/axios';import{useNotification}from'../context/NotificationContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TransactionForm=_ref=>{let{onTransactionAdded,onTransactionUpdated,onCancel,transaction}=_ref;const{showNotification}=useNotification();const[type,setType]=useState('expense');const[category,setCategory]=useState('');const[amount,setAmount]=useState('');const[date,setDate]=useState(new Date().toISOString().split('T')[0]);const[description,setDescription]=useState('');const typeInputRef=useRef(null);const isEditMode=transaction&&transaction._id;useEffect(()=>{if(typeInputRef.current){typeInputRef.current.focus();}if(isEditMode){setType(transaction.type||'expense');setCategory(transaction.category||'');setAmount(transaction.amount||'');setDate(transaction.date?new Date(transaction.date).toISOString().split('T')[0]:new Date().toISOString().split('T')[0]);setDescription(transaction.description||'');}else{setType('expense');setCategory('');setAmount('');setDate(new Date().toISOString().split('T')[0]);setDescription('');}},[transaction,isEditMode]);const handleSubmit=async e=>{e.preventDefault();if(!amount||parseFloat(amount)<=0){showNotification('Please enter a valid amount.','error');return;}const transactionData={type,category,amount:parseFloat(amount),date,description};try{if(isEditMode){const res=await axios.put(\"/transactions/\".concat(transaction._id),transactionData);if(onTransactionUpdated)onTransactionUpdated(res.data.data);showNotification('Transaction updated successfully!','success');}else{const res=await axios.post('/transactions',transactionData);if(onTransactionAdded)onTransactionAdded(res.data.data);showNotification('Transaction added successfully!','success');}}catch(err){var _err$response,_err$response$data;showNotification(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to process transaction','error');}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:isEditMode?'Edit Transaction':'Add Transaction'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"type\",className:\"block text-sm font-medium text-light-secondary dark:text-dark-secondary\",children:\"Type\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"type\",ref:typeInputRef,value:type,onChange:e=>setType(e.target.value),className:\"mt-1 block w-full\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"expense\",children:\"Expense\"}),/*#__PURE__*/_jsx(\"option\",{value:\"income\",children:\"Income\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",className:\"block text-sm font-medium text-light-secondary dark:text-dark-secondary\",children:\"Category\"}),/*#__PURE__*/_jsx(\"input\",{id:\"category\",type:\"text\",value:category,onChange:e=>setCategory(e.target.value),className:\"mt-1 block w-full\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"amount\",className:\"block text-sm font-medium text-light-secondary dark:text-dark-secondary\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"input\",{id:\"amount\",type:\"number\",value:amount,onChange:e=>setAmount(e.target.value),className:\"mt-1 block w-full\",required:true,min:\"0.01\",step:\"0.01\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",className:\"block text-sm font-medium text-light-secondary dark:text-dark-secondary\",children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{id:\"date\",type:\"date\",value:date,onChange:e=>setDate(e.target.value),className:\"mt-1 block w-full\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",className:\"block text-sm font-medium text-light-secondary dark:text-dark-secondary\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",value:description,onChange:e=>setDescription(e.target.value),className:\"mt-1 block w-full\",rows:\"3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"flex-1 bg-light-accent text-white p-2 rounded-md hover:opacity-90 transition-opacity min-h-[44px]\",children:isEditMode?'Update':'Add'}),onCancel&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onCancel,className:\"flex-1 bg-gray-200 dark:bg-gray-600 p-2 rounded-md hover:opacity-90 transition-opacity min-h-[44px]\",children:\"Cancel\"})]})]});};export default TransactionForm;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","useNotification","jsx","_jsx","jsxs","_jsxs","TransactionForm","_ref","onTransactionAdded","onTransactionUpdated","onCancel","transaction","showNotification","type","setType","category","setCategory","amount","setAmount","date","setDate","Date","toISOString","split","description","setDescription","typeInputRef","isEditMode","_id","current","focus","handleSubmit","e","preventDefault","parseFloat","transactionData","res","put","concat","data","post","err","_err$response","_err$response$data","response","error","onSubmit","className","children","htmlFor","id","ref","value","onChange","target","required","min","step","rows","onClick"],"sources":["C:/Users/vansh patel/OneDrive/Desktop/study/sem5/projects/finaurial/finaurial/src/components/TransactionForm.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from '../utils/axios';\nimport { useNotification } from '../context/NotificationContext';\n\nconst TransactionForm = ({ onTransactionAdded, onTransactionUpdated, onCancel, transaction }) => {\n  const { showNotification } = useNotification();\n  const [type, setType] = useState('expense');\n  const [category, setCategory] = useState('');\n  const [amount, setAmount] = useState('');\n  const [date, setDate] = useState(new Date().toISOString().split('T')[0]);\n  const [description, setDescription] = useState('');\n  const typeInputRef = useRef(null);\n\n  const isEditMode = transaction && transaction._id;\n\n  useEffect(() => {\n    if (typeInputRef.current) {\n      typeInputRef.current.focus();\n    }\n\n    if (isEditMode) {\n      setType(transaction.type || 'expense');\n      setCategory(transaction.category || '');\n      setAmount(transaction.amount || '');\n      setDate(transaction.date ? new Date(transaction.date).toISOString().split('T')[0] : new Date().toISOString().split('T')[0]);\n      setDescription(transaction.description || '');\n    } else {\n      setType('expense');\n      setCategory('');\n      setAmount('');\n      setDate(new Date().toISOString().split('T')[0]);\n      setDescription('');\n    }\n  }, [transaction, isEditMode]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!amount || parseFloat(amount) <= 0) {\n        showNotification('Please enter a valid amount.', 'error');\n        return;\n    }\n\n    const transactionData = { type, category, amount: parseFloat(amount), date, description };\n\n    try {\n      if (isEditMode) {\n        const res = await axios.put(`/transactions/${transaction._id}`, transactionData);\n        if (onTransactionUpdated) onTransactionUpdated(res.data.data);\n        showNotification('Transaction updated successfully!', 'success');\n      } else {\n        const res = await axios.post('/transactions', transactionData);\n        if (onTransactionAdded) onTransactionAdded(res.data.data);\n        showNotification('Transaction added successfully!', 'success');\n      }\n    } catch (err) {\n      showNotification(err.response?.data?.error || 'Failed to process transaction', 'error');\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <h2 className=\"text-2xl font-bold\">{isEditMode ? 'Edit Transaction' : 'Add Transaction'}</h2>\n      \n      <div>\n        <label htmlFor=\"type\" className=\"block text-sm font-medium text-light-secondary dark:text-dark-secondary\">Type</label>\n        <select id=\"type\" ref={typeInputRef} value={type} onChange={(e) => setType(e.target.value)} className=\"mt-1 block w-full\">\n          <option value=\"expense\">Expense</option>\n          <option value=\"income\">Income</option>\n        </select>\n      </div>\n\n      <div>\n        <label htmlFor=\"category\" className=\"block text-sm font-medium text-light-secondary dark:text-dark-secondary\">Category</label>\n        <input id=\"category\" type=\"text\" value={category} onChange={(e) => setCategory(e.target.value)} className=\"mt-1 block w-full\" required />\n      </div>\n\n      <div>\n        <label htmlFor=\"amount\" className=\"block text-sm font-medium text-light-secondary dark:text-dark-secondary\">Amount</label>\n        <input id=\"amount\" type=\"number\" value={amount} onChange={(e) => setAmount(e.target.value)} className=\"mt-1 block w-full\" required min=\"0.01\" step=\"0.01\" />\n      </div>\n\n      <div>\n        <label htmlFor=\"date\" className=\"block text-sm font-medium text-light-secondary dark:text-dark-secondary\">Date</label>\n        <input id=\"date\" type=\"date\" value={date} onChange={(e) => setDate(e.target.value)} className=\"mt-1 block w-full\" required />\n      </div>\n\n      <div>\n        <label htmlFor=\"description\" className=\"block text-sm font-medium text-light-secondary dark:text-dark-secondary\">Description</label>\n        <textarea id=\"description\" value={description} onChange={(e) => setDescription(e.target.value)} className=\"mt-1 block w-full\" rows=\"3\" />\n      </div>\n\n      <div className=\"flex space-x-4 pt-4\">\n        <button type=\"submit\" className=\"flex-1 bg-light-accent text-white p-2 rounded-md hover:opacity-90 transition-opacity min-h-[44px]\">\n          {isEditMode ? 'Update' : 'Add'}\n        </button>\n        {onCancel && (\n          <button type=\"button\" onClick={onCancel} className=\"flex-1 bg-gray-200 dark:bg-gray-600 p-2 rounded-md hover:opacity-90 transition-opacity min-h-[44px]\">\n            Cancel\n          </button>\n        )}\n      </div>\n    </form>\n  );\n};\n\nexport default TransactionForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import axios from'../utils/axios';import{useNotification}from'../context/NotificationContext';import Card from'../components/Card';import{Bar}from'react-chartjs-2';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ReportsPage=()=>{const{showNotification}=useNotification();const[spendingData,setSpendingData]=useState(null);const[loading,setLoading]=useState(true);const fetchReports=useCallback(async()=>{try{const res=await axios.get('/transactions/spending-breakdown?period=monthly');const latestReport=res.data.data[res.data.data.length-1];// Get the last month's data\nif(latestReport){setSpendingData({labels:latestReport.categories.map(c=>c.category),datasets:[{label:'Spending by Category',data:latestReport.categories.map(c=>c.amount),backgroundColor:'rgba(75, 192, 192, 0.6)'}]});}}catch(err){showNotification('Failed to fetch report data','error');}finally{setLoading(false);}},[showNotification]);useEffect(()=>{fetchReports();},[fetchReports]);if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading reports...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"Reports\"}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"Spending Breakdown (Last Month)\"}),spendingData?/*#__PURE__*/_jsx(Bar,{data:spendingData}):/*#__PURE__*/_jsx(\"p\",{children:\"No spending data available for the last month.\"})]})]});};export default ReportsPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","useNotification","Card","Bar","jsx","_jsx","jsxs","_jsxs","ReportsPage","showNotification","spendingData","setSpendingData","loading","setLoading","fetchReports","res","get","latestReport","data","length","labels","categories","map","c","category","datasets","label","amount","backgroundColor","err","children","className"],"sources":["C:/Users/vansh patel/OneDrive/Desktop/study/sem5/projects/finaurial/finaurial/src/pages/ReportsPage.js"],"sourcesContent":["\nimport React, { useState, useEffect, useCallback } from 'react';\nimport axios from '../utils/axios';\nimport { useNotification } from '../context/NotificationContext';\nimport Card from '../components/Card';\nimport { Bar } from 'react-chartjs-2';\n\nconst ReportsPage = () => {\n  const { showNotification } = useNotification();\n  const [spendingData, setSpendingData] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const fetchReports = useCallback(async () => {\n    try {\n      const res = await axios.get('/transactions/spending-breakdown?period=monthly');\n      const latestReport = res.data.data[res.data.data.length - 1]; // Get the last month's data\n      if (latestReport) {\n        setSpendingData({\n          labels: latestReport.categories.map(c => c.category),\n          datasets: [{\n            label: 'Spending by Category',\n            data: latestReport.categories.map(c => c.amount),\n            backgroundColor: 'rgba(75, 192, 192, 0.6)',\n          }]\n        });\n      }\n    } catch (err) {\n      showNotification('Failed to fetch report data', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, [showNotification]);\n\n  useEffect(() => {\n    fetchReports();\n  }, [fetchReports]);\n\n  if (loading) return <div>Loading reports...</div>;\n\n  return (\n    <div className=\"space-y-6\">\n      <h1 className=\"text-3xl font-bold\">Reports</h1>\n      <Card>\n        <h2 className=\"text-xl font-bold mb-4\">Spending Breakdown (Last Month)</h2>\n        {spendingData ? (\n          <Bar data={spendingData} />\n        ) : (\n          <p>No spending data available for the last month.</p>\n        )}\n      </Card>\n    </div>\n  );\n};\n\nexport default ReportsPage;\n"],"mappings":"AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,MAAO,CAAAC,KAAK,KAAM,gBAAgB,CAClC,OAASC,eAAe,KAAQ,gCAAgC,CAChE,MAAO,CAAAC,IAAI,KAAM,oBAAoB,CACrC,OAASC,GAAG,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtC,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAAEC,gBAAiB,CAAC,CAAGR,eAAe,CAAC,CAAC,CAC9C,KAAM,CAACS,YAAY,CAAEC,eAAe,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAE5C,KAAM,CAAAiB,YAAY,CAAGf,WAAW,CAAC,SAAY,CAC3C,GAAI,CACF,KAAM,CAAAgB,GAAG,CAAG,KAAM,CAAAf,KAAK,CAACgB,GAAG,CAAC,iDAAiD,CAAC,CAC9E,KAAM,CAAAC,YAAY,CAAGF,GAAG,CAACG,IAAI,CAACA,IAAI,CAACH,GAAG,CAACG,IAAI,CAACA,IAAI,CAACC,MAAM,CAAG,CAAC,CAAC,CAAE;AAC9D,GAAIF,YAAY,CAAE,CAChBN,eAAe,CAAC,CACdS,MAAM,CAAEH,YAAY,CAACI,UAAU,CAACC,GAAG,CAACC,CAAC,EAAIA,CAAC,CAACC,QAAQ,CAAC,CACpDC,QAAQ,CAAE,CAAC,CACTC,KAAK,CAAE,sBAAsB,CAC7BR,IAAI,CAAED,YAAY,CAACI,UAAU,CAACC,GAAG,CAACC,CAAC,EAAIA,CAAC,CAACI,MAAM,CAAC,CAChDC,eAAe,CAAE,yBACnB,CAAC,CACH,CAAC,CAAC,CACJ,CACF,CAAE,MAAOC,GAAG,CAAE,CACZpB,gBAAgB,CAAC,6BAA6B,CAAE,OAAO,CAAC,CAC1D,CAAC,OAAS,CACRI,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACJ,gBAAgB,CAAC,CAAC,CAEtBX,SAAS,CAAC,IAAM,CACdgB,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACA,YAAY,CAAC,CAAC,CAElB,GAAIF,OAAO,CAAE,mBAAOP,IAAA,QAAAyB,QAAA,CAAK,oBAAkB,CAAK,CAAC,CAEjD,mBACEvB,KAAA,QAAKwB,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxBzB,IAAA,OAAI0B,SAAS,CAAC,oBAAoB,CAAAD,QAAA,CAAC,SAAO,CAAI,CAAC,cAC/CvB,KAAA,CAACL,IAAI,EAAA4B,QAAA,eACHzB,IAAA,OAAI0B,SAAS,CAAC,wBAAwB,CAAAD,QAAA,CAAC,iCAA+B,CAAI,CAAC,CAC1EpB,YAAY,cACXL,IAAA,CAACF,GAAG,EAACe,IAAI,CAAER,YAAa,CAAE,CAAC,cAE3BL,IAAA,MAAAyB,QAAA,CAAG,gDAA8C,CAAG,CACrD,EACG,CAAC,EACJ,CAAC,CAEV,CAAC,CAED,cAAe,CAAAtB,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
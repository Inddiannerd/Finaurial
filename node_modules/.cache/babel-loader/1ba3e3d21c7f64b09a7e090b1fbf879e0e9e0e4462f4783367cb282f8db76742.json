{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'../utils/axios';import{useNotification}from'../context/NotificationContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TransactionForm=_ref=>{let{onTransactionAdded,onTransactionUpdated,onCancel,transaction}=_ref;const{showNotification}=useNotification();const[type,setType]=useState('expense');const[category,setCategory]=useState('');const[amount,setAmount]=useState('');const[date,setDate]=useState(new Date().toISOString().split('T')[0]);const[description,setDescription]=useState('');const isEditMode=transaction&&transaction._id;useEffect(()=>{if(isEditMode){setType(transaction.type||'expense');setCategory(transaction.category||'');setAmount(transaction.amount||'');setDate(transaction.date?new Date(transaction.date).toISOString().split('T')[0]:new Date().toISOString().split('T')[0]);setDescription(transaction.description||'');}},[transaction,isEditMode]);const handleSubmit=async e=>{e.preventDefault();if(!amount||parseFloat(amount)<=0){showNotification('Please enter a valid amount.','error');return;}const transactionData={type,category,amount:parseFloat(amount),date,description};try{if(isEditMode){const res=await axios.put(\"/transactions/\".concat(transaction._id),transactionData);showNotification('Transaction updated successfully!','success');if(onTransactionUpdated){onTransactionUpdated(res.data.data);}}else{const res=await axios.post('/transactions',transactionData);showNotification('Transaction added successfully!','success');if(onTransactionAdded){onTransactionAdded(res.data.data);}}}catch(err){var _err$response,_err$response$data;showNotification(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to process transaction','error');}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6 text-gray-800 dark:text-gray-200\",children:isEditMode?'Edit Transaction':'Add Transaction'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 dark:text-gray-300 mb-2\",children:\"Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:type,onChange:e=>setType(e.target.value),className:\"w-full p-2 border rounded text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"expense\",children:\"Expense\"}),/*#__PURE__*/_jsx(\"option\",{value:\"income\",children:\"Income\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 dark:text-gray-300 mb-2\",children:\"Category\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:category,onChange:e=>setCategory(e.target.value),className:\"w-full p-2 border rounded text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 dark:text-gray-300 mb-2\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:amount,onChange:e=>setAmount(e.target.value),className:\"w-full p-2 border rounded text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600\",required:true,min:\"0.01\",step:\"0.01\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 dark:text-gray-300 mb-2\",children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:date,onChange:e=>setDate(e.target.value),className:\"w-full p-2 border rounded text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 dark:text-gray-300 mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:description,onChange:e=>setDescription(e.target.value),className:\"w-full p-2 border rounded text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600\",rows:\"3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"flex-1 bg-teal-600 text-white p-2 rounded hover:bg-teal-700 transition duration-200 min-h-[44px]\",children:isEditMode?'Update Transaction':'Add Transaction'}),onCancel&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onCancel,className:\"flex-1 bg-gray-300 text-gray-800 p-2 rounded hover:bg-gray-400 transition duration-200 min-h-[44px]\",children:\"Cancel\"})]})]})]});};export default TransactionForm;","map":{"version":3,"names":["React","useState","useEffect","axios","useNotification","jsx","_jsx","jsxs","_jsxs","TransactionForm","_ref","onTransactionAdded","onTransactionUpdated","onCancel","transaction","showNotification","type","setType","category","setCategory","amount","setAmount","date","setDate","Date","toISOString","split","description","setDescription","isEditMode","_id","handleSubmit","e","preventDefault","parseFloat","transactionData","res","put","concat","data","post","err","_err$response","_err$response$data","response","error","children","className","onSubmit","value","onChange","target","required","min","step","rows","onClick"],"sources":["C:/Users/vansh patel/OneDrive/Desktop/study/sem5/projects/finaurial/finaurial/src/components/TransactionForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from '../utils/axios';\nimport { useNotification } from '../context/NotificationContext';\n\nconst TransactionForm = ({ onTransactionAdded, onTransactionUpdated, onCancel, transaction }) => {\n  const { showNotification } = useNotification();\n  const [type, setType] = useState('expense');\n  const [category, setCategory] = useState('');\n  const [amount, setAmount] = useState('');\n  const [date, setDate] = useState(new Date().toISOString().split('T')[0]);\n  const [description, setDescription] = useState('');\n\n  const isEditMode = transaction && transaction._id;\n\n  useEffect(() => {\n    if (isEditMode) {\n      setType(transaction.type || 'expense');\n      setCategory(transaction.category || '');\n      setAmount(transaction.amount || '');\n      setDate(transaction.date ? new Date(transaction.date).toISOString().split('T')[0] : new Date().toISOString().split('T')[0]);\n      setDescription(transaction.description || '');\n    }\n  }, [transaction, isEditMode]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!amount || parseFloat(amount) <= 0) {\n        showNotification('Please enter a valid amount.', 'error');\n        return;\n    }\n\n    const transactionData = {\n      type,\n      category,\n      amount: parseFloat(amount),\n      date,\n      description,\n    };\n\n    try {\n      if (isEditMode) {\n        const res = await axios.put(`/transactions/${transaction._id}`, transactionData);\n        showNotification('Transaction updated successfully!', 'success');\n        if (onTransactionUpdated) {\n          onTransactionUpdated(res.data.data);\n        }\n      } else {\n        const res = await axios.post('/transactions', transactionData);\n        showNotification('Transaction added successfully!', 'success');\n        if (onTransactionAdded) {\n          onTransactionAdded(res.data.data);\n        }\n      }\n    } catch (err) {\n      showNotification(err.response?.data?.error || 'Failed to process transaction', 'error');\n    }\n  };\n\n  return (\n    <div>\n      <h2 className=\"text-2xl font-bold mb-6 text-gray-800 dark:text-gray-200\">{isEditMode ? 'Edit Transaction' : 'Add Transaction'}</h2>\n      \n      <form onSubmit={handleSubmit}>\n        <div className=\"mb-4\">\n          <label className=\"block text-gray-700 dark:text-gray-300 mb-2\">Type</label>\n          <select\n            value={type}\n            onChange={(e) => setType(e.target.value)}\n            className=\"w-full p-2 border rounded text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600\"\n          >\n            <option value=\"expense\">Expense</option>\n            <option value=\"income\">Income</option>\n          </select>\n        </div>\n\n        <div className=\"mb-4\">\n          <label className=\"block text-gray-700 dark:text-gray-300 mb-2\">Category</label>\n          <input\n            type=\"text\"\n            value={category}\n            onChange={(e) => setCategory(e.target.value)}\n            className=\"w-full p-2 border rounded text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600\"\n            required\n          />\n        </div>\n\n        <div className=\"mb-4\">\n          <label className=\"block text-gray-700 dark:text-gray-300 mb-2\">Amount</label>\n          <input\n            type=\"number\"\n            value={amount}\n            onChange={(e) => setAmount(e.target.value)}\n            className=\"w-full p-2 border rounded text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600\"\n            required\n            min=\"0.01\"\n            step=\"0.01\"\n          />\n        </div>\n\n        <div className=\"mb-4\">\n          <label className=\"block text-gray-700 dark:text-gray-300 mb-2\">Date</label>\n          <input\n            type=\"date\"\n            value={date}\n            onChange={(e) => setDate(e.target.value)}\n            className=\"w-full p-2 border rounded text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600\"\n            required\n          />\n        </div>\n\n        <div className=\"mb-6\">\n          <label className=\"block text-gray-700 dark:text-gray-300 mb-2\">Description</label>\n          <textarea\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            className=\"w-full p-2 border rounded text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600\"\n            rows=\"3\"\n          />\n        </div>\n\n        <div className=\"flex space-x-4\">\n          <button\n            type=\"submit\"\n            className=\"flex-1 bg-teal-600 text-white p-2 rounded hover:bg-teal-700 transition duration-200 min-h-[44px]\"\n          >\n            {isEditMode ? 'Update Transaction' : 'Add Transaction'}\n          </button>\n          {onCancel && (\n            <button\n              type=\"button\"\n              onClick={onCancel}\n              className=\"flex-1 bg-gray-300 text-gray-800 p-2 rounded hover:bg-gray-400 transition duration-200 min-h-[44px]\"\n            >\n              Cancel\n            </button>\n          )}\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default TransactionForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
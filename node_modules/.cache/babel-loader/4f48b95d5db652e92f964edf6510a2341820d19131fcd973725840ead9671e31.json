{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import axios from'../utils/axios';import Card from'../components/Card';import{Line}from'react-chartjs-2';import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend}from'chart.js';import{useNotification}from'../context/NotificationContext';import{useTheme}from'../context/ThemeContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend);const DashboardPage=()=>{const{showNotification}=useNotification();const{theme}=useTheme();const[summary,setSummary]=useState({totalIncome:0,totalExpenses:0,totalSavings:0});const[chartData,setChartData]=useState({labels:[],datasets:[]});const[loading,setLoading]=useState(true);const fetchDashboardData=useCallback(async()=>{setLoading(true);try{const[summaryRes,monthlySummaryRes,savingsRes]=await Promise.all([axios.get('/transactions/summary'),axios.get('/transactions/monthly-summary'),axios.get('/savings/summary')]);const{totalIncome,totalExpenses}=summaryRes.data.data;const{labels,incomeData,expenseData}=monthlySummaryRes.data.data;const totalSavings=savingsRes.data.data.totalSavings||0;setSummary({totalIncome,totalExpenses,totalSavings});const chartColors=theme==='light'?{income:'#10B981',expense:'#EF4444'}:{income:'#34D399',expense:'#F87171'};setChartData({labels,datasets:[{label:'Income',data:incomeData,borderColor:chartColors.income,backgroundColor:\"\".concat(chartColors.income,\"80\")},{label:'Expenses',data:expenseData,borderColor:chartColors.expense,backgroundColor:\"\".concat(chartColors.expense,\"80\")}]});}catch(err){showNotification('Failed to fetch dashboard data.','error');}finally{setLoading(false);}},[showNotification,theme]);useEffect(()=>{fetchDashboardData();},[fetchDashboardData]);const totalBalance=summary.totalIncome-summary.totalExpenses;if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:\"Loading dashboard...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-sm font-medium text-light-secondary dark:text-dark-secondary\",children:\"Total Balance\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-3xl font-semibold\",children:[\"$\",totalBalance.toFixed(2)]})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-sm font-medium text-light-secondary dark:text-dark-secondary\",children:\"Total Income\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-3xl font-semibold text-light-success dark:text-dark-success\",children:[\"$\",summary.totalIncome.toFixed(2)]})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-sm font-medium text-light-secondary dark:text-dark-secondary\",children:\"Total Expenses\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-3xl font-semibold text-light-error dark:text-dark-error\",children:[\"$\",summary.totalExpenses.toFixed(2)]})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-sm font-medium text-light-secondary dark:text-dark-secondary\",children:\"Total Savings\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-3xl font-semibold text-light-accent dark:text-dark-accent\",children:[\"$\",summary.totalSavings.toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium mb-4\",children:\"Monthly Income vs. Expense\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-72\",children:/*#__PURE__*/_jsx(Line,{data:chartData,options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{labels:{color:theme==='light'?'#1F2937':'#F9FAFB'}}},scales:{x:{ticks:{color:theme==='light'?'#374151':'#9CA3AF'}},y:{ticks:{color:theme==='light'?'#374151':'#9CA3AF'}}}}})})]})]});};export default DashboardPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","Card","Line","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","useNotification","useTheme","jsx","_jsx","jsxs","_jsxs","register","DashboardPage","showNotification","theme","summary","setSummary","totalIncome","totalExpenses","totalSavings","chartData","setChartData","labels","datasets","loading","setLoading","fetchDashboardData","summaryRes","monthlySummaryRes","savingsRes","Promise","all","get","data","incomeData","expenseData","chartColors","income","expense","label","borderColor","backgroundColor","concat","err","totalBalance","className","children","toFixed","options","responsive","maintainAspectRatio","plugins","legend","color","scales","x","ticks","y"],"sources":["C:/Users/vansh patel/OneDrive/Desktop/study/sem5/projects/finaurial/finaurial/src/pages/DashboardPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport axios from '../utils/axios';\nimport Card from '../components/Card';\nimport { Line } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from 'chart.js';\nimport { useNotification } from '../context/NotificationContext';\nimport { useTheme } from '../context/ThemeContext';\n\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\n\nconst DashboardPage = () => {\n  const { showNotification } = useNotification();\n  const { theme } = useTheme();\n  const [summary, setSummary] = useState({ totalIncome: 0, totalExpenses: 0, totalSavings: 0 });\n  const [chartData, setChartData] = useState({ labels: [], datasets: [] });\n  const [loading, setLoading] = useState(true);\n\n  const fetchDashboardData = useCallback(async () => {\n    setLoading(true);\n    try {\n      const [summaryRes, monthlySummaryRes, savingsRes] = await Promise.all([\n        axios.get('/transactions/summary'),\n        axios.get('/transactions/monthly-summary'),\n        axios.get('/savings/summary')\n      ]);\n\n      const { totalIncome, totalExpenses } = summaryRes.data.data;\n      const { labels, incomeData, expenseData } = monthlySummaryRes.data.data;\n      const totalSavings = savingsRes.data.data.totalSavings || 0;\n\n      setSummary({ totalIncome, totalExpenses, totalSavings });\n\n      const chartColors = theme === 'light' ? \n        { income: '#10B981', expense: '#EF4444' } : \n        { income: '#34D399', expense: '#F87171' };\n\n      setChartData({\n        labels,\n        datasets: [\n          { label: 'Income', data: incomeData, borderColor: chartColors.income, backgroundColor: `${chartColors.income}80` },\n          { label: 'Expenses', data: expenseData, borderColor: chartColors.expense, backgroundColor: `${chartColors.expense}80` },\n        ],\n      });\n\n    } catch (err) {\n      showNotification('Failed to fetch dashboard data.', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, [showNotification, theme]);\n\n  useEffect(() => {\n    fetchDashboardData();\n  }, [fetchDashboardData]);\n\n  const totalBalance = summary.totalIncome - summary.totalExpenses;\n\n  if (loading) {\n    return <div className=\"text-center py-8\">Loading dashboard...</div>;\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      <h1 className=\"text-3xl font-bold\">Dashboard</h1>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <Card><h2 className=\"text-sm font-medium text-light-secondary dark:text-dark-secondary\">Total Balance</h2><p className=\"mt-1 text-3xl font-semibold\">${totalBalance.toFixed(2)}</p></Card>\n        <Card><h2 className=\"text-sm font-medium text-light-secondary dark:text-dark-secondary\">Total Income</h2><p className=\"mt-1 text-3xl font-semibold text-light-success dark:text-dark-success\">${summary.totalIncome.toFixed(2)}</p></Card>\n        <Card><h2 className=\"text-sm font-medium text-light-secondary dark:text-dark-secondary\">Total Expenses</h2><p className=\"mt-1 text-3xl font-semibold text-light-error dark:text-dark-error\">${summary.totalExpenses.toFixed(2)}</p></Card>\n        <Card><h2 className=\"text-sm font-medium text-light-secondary dark:text-dark-secondary\">Total Savings</h2><p className=\"mt-1 text-3xl font-semibold text-light-accent dark:text-dark-accent\">${summary.totalSavings.toFixed(2)}</p></Card>\n      </div>\n\n      <Card>\n        <h2 className=\"text-lg font-medium mb-4\">Monthly Income vs. Expense</h2>\n        <div className=\"h-72\">\n          <Line data={chartData} options={{ responsive: true, maintainAspectRatio: false, plugins: { legend: { labels: { color: theme === 'light' ? '#1F2937' : '#F9FAFB' } } }, scales: { x: { ticks: { color: theme === 'light' ? '#374151' : '#9CA3AF' } }, y: { ticks: { color: theme === 'light' ? '#374151' : '#9CA3AF' } } } }} />\n        </div>\n      </Card>\n    </div>\n  );\n};\n\nexport default DashboardPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
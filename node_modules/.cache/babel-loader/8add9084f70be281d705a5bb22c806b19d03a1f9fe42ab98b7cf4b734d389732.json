{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,NavLink,useNavigate,useLocation}from'react-router-dom';import{jwtDecode}from'jwt-decode';import axios from'../utils/axios';import{useTheme}from'../context/ThemeContext';// Import useTheme\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Navbar=()=>{const navigate=useNavigate();const location=useLocation();const{theme,toggleTheme}=useTheme();// Use the theme hook\nconst[featureFlags,setFeatureFlags]=useState({});const token=localStorage.getItem('token');let userRole='user';if(token){try{const decodedToken=jwtDecode(token);userRole=decodedToken.user.role;}catch(error){console.error('Invalid token:',error);}}useEffect(()=>{const fetchFeatureFlags=async()=>{try{const res=await axios.get('/admin/features');const flags={};res.data.forEach(flag=>{// Support both { name, isEnabled } and { feature, enabled } shapes\nconst name=flag.name||flag.feature;const isEnabled=flag.isEnabled!==undefined?flag.isEnabled:flag.enabled;flags[name]=isEnabled;});setFeatureFlags(flags);}catch(err){console.error('Failed to fetch feature flags:',err);}};if(token){fetchFeatureFlags();}},[token]);const handleLogout=()=>{localStorage.removeItem('token');navigate('/login');};const navLinkClasses=_ref=>{let{isActive}=_ref;return\"inline-flex items-center px-3 py-2 rounded-md text-base font-medium min-h-[44px] transition-colors \"+(isActive?'bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-white':'text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white');};return/*#__PURE__*/_jsx(\"nav\",{className:\"bg-white/90 backdrop-blur-md shadow-lg border-b border-teal-100 sticky top-0 z-50\",\"aria-label\":\"Main navigation\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between h-16\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"text-2xl font-bold text-blue-600 dark:text-blue-400\",children:\"Finaurial\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"hidden sm:ml-6 sm:flex sm:items-center sm:space-x-4\",children:[/*#__PURE__*/_jsx(NavLink,{to:\"/dashboard\",className:navLinkClasses,\"aria-current\":\"page\",children:\"Dashboard\"}),featureFlags.Transactions!==false&&/*#__PURE__*/_jsx(NavLink,{to:\"/transactions\",className:navLinkClasses,\"aria-current\":\"page\",children:\"Transactions\"}),featureFlags.Budgets!==false&&/*#__PURE__*/_jsx(NavLink,{to:\"/budgets\",className:navLinkClasses,\"aria-current\":\"page\",children:\"Budgets\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/reports\",className:navLinkClasses,\"aria-current\":\"page\",children:\"Reports\"}),featureFlags.Savings!==false&&/*#__PURE__*/_jsx(NavLink,{to:\"/savings\",className:navLinkClasses,\"aria-current\":\"page\",children:\"Savings\"}),featureFlags.Goals!==false&&/*#__PURE__*/_jsx(NavLink,{to:\"/goals\",className:navLinkClasses,\"aria-current\":\"page\",children:\"Goals\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/contact-us\",className:navLinkClasses,\"aria-current\":\"page\",children:\"Contact Us\"}),userRole==='admin'&&/*#__PURE__*/_jsx(NavLink,{to:\"/admin\",className:navLinkClasses,\"aria-current\":\"page\",children:\"Admin\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleTheme,className:\"p-2 rounded-md text-gray-500 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",\"aria-label\":theme==='light'?'Activate dark mode':'Activate light mode',children:theme==='light'?'üåô':'‚òÄÔ∏è'}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"bg-red-500 text-white px-4 py-2 rounded-md my-auto hover:bg-red-600 min-h-[44px]\",children:\"Logout\"})]})]})})});};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","Link","NavLink","useNavigate","useLocation","jwtDecode","axios","useTheme","jsx","_jsx","jsxs","_jsxs","Navbar","navigate","location","theme","toggleTheme","featureFlags","setFeatureFlags","token","localStorage","getItem","userRole","decodedToken","user","role","error","console","fetchFeatureFlags","res","get","flags","data","forEach","flag","name","feature","isEnabled","undefined","enabled","err","handleLogout","removeItem","navLinkClasses","_ref","isActive","className","children","to","Transactions","Budgets","Savings","Goals","onClick"],"sources":["C:/Users/vansh patel/OneDrive/Desktop/study/sem5/projects/finaurial/finaurial/src/components/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, NavLink, useNavigate, useLocation } from 'react-router-dom';\nimport { jwtDecode } from 'jwt-decode';\nimport axios from '../utils/axios';\nimport { useTheme } from '../context/ThemeContext'; // Import useTheme\n\nconst Navbar = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { theme, toggleTheme } = useTheme(); // Use the theme hook\n  const [featureFlags, setFeatureFlags] = useState({});\n  const token = localStorage.getItem('token');\n  let userRole = 'user';\n\n  if (token) {\n    try {\n      const decodedToken = jwtDecode(token);\n      userRole = decodedToken.user.role;\n    } catch (error) {\n      console.error('Invalid token:', error);\n    }\n  }\n\n  useEffect(() => {\n    const fetchFeatureFlags = async () => {\n      try {\n        const res = await axios.get('/admin/features');\n        const flags = {};\n        res.data.forEach(flag => {\n          // Support both { name, isEnabled } and { feature, enabled } shapes\n          const name = flag.name || flag.feature;\n          const isEnabled = flag.isEnabled !== undefined ? flag.isEnabled : flag.enabled;\n          flags[name] = isEnabled;\n        });\n        setFeatureFlags(flags);\n      } catch (err) {\n        console.error('Failed to fetch feature flags:', err);\n      }\n    };\n\n    if (token) {\n      fetchFeatureFlags();\n    }\n  }, [token]);\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    navigate('/login');\n  };\n\n  const navLinkClasses = ({ isActive }) =>\n    `inline-flex items-center px-3 py-2 rounded-md text-base font-medium min-h-[44px] transition-colors ` +\n    (isActive\n      ? 'bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-white'\n      : 'text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white');\n\n  return (\n    <nav className=\"bg-white/90 backdrop-blur-md shadow-lg border-b border-teal-100 sticky top-0 z-50\" aria-label=\"Main navigation\">\n      <div className=\"max-w-7xl mx-auto px-4\">\n        <div className=\"flex justify-between h-16\">\n          <div className=\"flex items-center\">\n            <Link to=\"/dashboard\" className=\"text-2xl font-bold text-blue-600 dark:text-blue-400\">\n              Finaurial\n            </Link>\n          </div>\n          <div className=\"hidden sm:ml-6 sm:flex sm:items-center sm:space-x-4\">\n            <NavLink to=\"/dashboard\" className={navLinkClasses} aria-current=\"page\">\n              Dashboard\n            </NavLink>\n            {featureFlags.Transactions !== false && (\n              <NavLink to=\"/transactions\" className={navLinkClasses} aria-current=\"page\">\n                Transactions\n              </NavLink>\n            )}\n            {featureFlags.Budgets !== false && (\n              <NavLink to=\"/budgets\" className={navLinkClasses} aria-current=\"page\">\n                Budgets\n              </NavLink>\n            )}\n            <NavLink to=\"/reports\" className={navLinkClasses} aria-current=\"page\">\n              Reports\n            </NavLink>\n            {featureFlags.Savings !== false && (\n              <NavLink to=\"/savings\" className={navLinkClasses} aria-current=\"page\">\n                Savings\n              </NavLink>\n            )}\n            {featureFlags.Goals !== false && (\n              <NavLink to=\"/goals\" className={navLinkClasses} aria-current=\"page\">\n                Goals\n              </NavLink>\n            )}\n            <NavLink to=\"/contact-us\" className={navLinkClasses} aria-current=\"page\">\n              Contact Us\n            </NavLink>\n            {userRole === 'admin' && (\n              <NavLink to=\"/admin\" className={navLinkClasses} aria-current=\"page\">\n                Admin\n              </NavLink>\n            )}\n          </div>\n          <div className=\"flex items-center space-x-4\">\n            <button\n              onClick={toggleTheme}\n              className=\"p-2 rounded-md text-gray-500 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n              aria-label={theme === 'light' ? 'Activate dark mode' : 'Activate light mode'}\n            >\n              {theme === 'light' ? 'üåô' : '‚òÄÔ∏è'}\n            </button>\n            <button\n              onClick={handleLogout}\n              className=\"bg-red-500 text-white px-4 py-2 rounded-md my-auto hover:bg-red-600 min-h-[44px]\"\n            >\n              Logout\n            </button>\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nexport default Navbar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
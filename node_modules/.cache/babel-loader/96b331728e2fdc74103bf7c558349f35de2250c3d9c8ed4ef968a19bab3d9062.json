{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import axios from'../utils/axios';import{useNotification}from'../context/NotificationContext';import Card from'../components/Card';import{Bar}from'react-chartjs-2';import{useTheme}from'../context/ThemeContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ReportsPage=()=>{const{showNotification}=useNotification();const{theme}=useTheme();const[spendingData,setSpendingData]=useState(null);const[loading,setLoading]=useState(true);const fetchReports=useCallback(async()=>{try{const res=await axios.get('/transactions/spending-breakdown?period=monthly');const latestReport=res.data.data[res.data.data.length-1];if(latestReport){const chartColors=theme==='light'?{bg:'#2563EB'}:{bg:'#3B82F6'};setSpendingData({labels:latestReport.categories.map(c=>c.category),datasets:[{label:'Spending by Category',data:latestReport.categories.map(c=>c.amount),backgroundColor:chartColors.bg}]});}}catch(err){showNotification('Failed to fetch report data','error');}finally{setLoading(false);}},[showNotification,theme]);useEffect(()=>{fetchReports();},[fetchReports]);if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading reports...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"Reports\"}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"Spending Breakdown (Last Month)\"}),spendingData?/*#__PURE__*/_jsx(Bar,{data:spendingData,options:{plugins:{legend:{labels:{color:theme==='light'?'#1F2937':'#F9FAFB'}}},scales:{x:{ticks:{color:theme==='light'?'#374151':'#9CA3AF'}},y:{ticks:{color:theme==='light'?'#374151':'#9CA3AF'}}}}}):/*#__PURE__*/_jsx(\"p\",{children:\"No spending data available for the last month.\"})]})]});};export default ReportsPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","useNotification","Card","Bar","useTheme","jsx","_jsx","jsxs","_jsxs","ReportsPage","showNotification","theme","spendingData","setSpendingData","loading","setLoading","fetchReports","res","get","latestReport","data","length","chartColors","bg","labels","categories","map","c","category","datasets","label","amount","backgroundColor","err","children","className","options","plugins","legend","color","scales","x","ticks","y"],"sources":["C:/Users/vansh patel/OneDrive/Desktop/study/sem5/projects/finaurial/finaurial/src/pages/ReportsPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport axios from '../utils/axios';\nimport { useNotification } from '../context/NotificationContext';\nimport Card from '../components/Card';\nimport { Bar } from 'react-chartjs-2';\nimport { useTheme } from '../context/ThemeContext';\n\nconst ReportsPage = () => {\n  const { showNotification } = useNotification();\n  const { theme } = useTheme();\n  const [spendingData, setSpendingData] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const fetchReports = useCallback(async () => {\n    try {\n      const res = await axios.get('/transactions/spending-breakdown?period=monthly');\n      const latestReport = res.data.data[res.data.data.length - 1];\n      if (latestReport) {\n        const chartColors = theme === 'light' ? \n          { bg: '#2563EB' } : \n          { bg: '#3B82F6' };\n        setSpendingData({\n          labels: latestReport.categories.map(c => c.category),\n          datasets: [{\n            label: 'Spending by Category',\n            data: latestReport.categories.map(c => c.amount),\n            backgroundColor: chartColors.bg,\n          }]\n        });\n      }\n    } catch (err) {\n      showNotification('Failed to fetch report data', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, [showNotification, theme]);\n\n  useEffect(() => {\n    fetchReports();\n  }, [fetchReports]);\n\n  if (loading) return <div>Loading reports...</div>;\n\n  return (\n    <div className=\"space-y-6\">\n      <h1 className=\"text-3xl font-bold\">Reports</h1>\n      <Card>\n        <h2 className=\"text-xl font-bold mb-4\">Spending Breakdown (Last Month)</h2>\n        {spendingData ? (\n          <Bar data={spendingData} options={{ plugins: { legend: { labels: { color: theme === 'light' ? '#1F2937' : '#F9FAFB' } } }, scales: { x: { ticks: { color: theme === 'light' ? '#374151' : '#9CA3AF' } }, y: { ticks: { color: theme === 'light' ? '#374151' : '#9CA3AF' } } } }} />\n        ) : (\n          <p>No spending data available for the last month.</p>\n        )}\n      </Card>\n    </div>\n  );\n};\n\nexport default ReportsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
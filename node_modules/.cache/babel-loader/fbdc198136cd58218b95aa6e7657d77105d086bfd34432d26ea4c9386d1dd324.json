{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'../utils/axios';// Use the centralized axios instance\nimport Card from'../components/Card';import{Line}from'react-chartjs-2';import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend}from'chart.js';import{useNotification}from'../context/NotificationContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend);const DashboardPage=()=>{const{showNotification}=useNotification();const[summary,setSummary]=useState({totalIncome:0,totalExpenses:0,totalSavings:0});const[chartData,setChartData]=useState({labels:[],datasets:[]});const[loading,setLoading]=useState(true);useEffect(()=>{const fetchDashboardData=async()=>{setLoading(true);try{// Parallel API calls\nconst[summaryRes,monthlySummaryRes,savingsRes]=await Promise.all([axios.get('/transactions/summary'),axios.get('/transactions/monthly-summary'),axios.get('/savings/summary')// Assuming a savings summary endpoint\n]);const{totalIncome,totalExpenses}=summaryRes.data.data;const{labels,incomeData,expenseData}=monthlySummaryRes.data.data;const totalSavings=savingsRes.data.data.totalSavings||0;setSummary({totalIncome,totalExpenses,totalSavings});setChartData({labels,datasets:[{label:'Income',data:incomeData,borderColor:'#16a34a',backgroundColor:'rgba(22, 163, 74, 0.5)'},{label:'Expenses',data:expenseData,borderColor:'#ef4444',backgroundColor:'rgba(239, 68, 68, 0.5)'}]});}catch(err){console.error(err);showNotification('Failed to fetch dashboard data.','error');}finally{setLoading(false);}};fetchDashboardData();},[showNotification]);const totalBalance=summary.totalIncome-summary.totalExpenses;if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:\"Loading dashboard...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800 dark:text-white\",children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsxs(Card,{className:\"border-l-4 border-blue-500\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Total Balance\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-3xl font-semibold text-gray-900 dark:text-white\",children:[\"$\",totalBalance.toFixed(2)]})]}),/*#__PURE__*/_jsxs(Card,{className:\"border-l-4 border-green-500\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Total Income\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-3xl font-semibold text-green-600\",children:[\"$\",summary.totalIncome.toFixed(2)]})]}),/*#__PURE__*/_jsxs(Card,{className:\"border-l-4 border-red-500\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Total Expenses\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-3xl font-semibold text-red-600\",children:[\"$\",summary.totalExpenses.toFixed(2)]})]}),/*#__PURE__*/_jsxs(Card,{className:\"border-l-4 border-purple-500\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Total Savings\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-3xl font-semibold text-purple-600\",children:[\"$\",summary.totalSavings.toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900 dark:text-white mb-4\",children:\"Monthly Income vs. Expense\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-72\",children:/*#__PURE__*/_jsx(Line,{data:chartData,options:{responsive:true,maintainAspectRatio:false}})})]})]});};export default DashboardPage;","map":{"version":3,"names":["React","useState","useEffect","axios","Card","Line","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","useNotification","jsx","_jsx","jsxs","_jsxs","register","DashboardPage","showNotification","summary","setSummary","totalIncome","totalExpenses","totalSavings","chartData","setChartData","labels","datasets","loading","setLoading","fetchDashboardData","summaryRes","monthlySummaryRes","savingsRes","Promise","all","get","data","incomeData","expenseData","label","borderColor","backgroundColor","err","console","error","totalBalance","className","children","toFixed","options","responsive","maintainAspectRatio"],"sources":["C:/Users/vansh patel/OneDrive/Desktop/study/sem5/projects/finaurial/finaurial/src/pages/DashboardPage.js"],"sourcesContent":["\nimport React, { useState, useEffect } from 'react';\nimport axios from '../utils/axios'; // Use the centralized axios instance\nimport Card from '../components/Card';\nimport { Line } from 'react-chartjs-2';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n} from 'chart.js';\nimport { useNotification } from '../context/NotificationContext';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\nconst DashboardPage = () => {\n  const { showNotification } = useNotification();\n  const [summary, setSummary] = useState({ totalIncome: 0, totalExpenses: 0, totalSavings: 0 });\n  const [chartData, setChartData] = useState({ labels: [], datasets: [] });\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchDashboardData = async () => {\n      setLoading(true);\n      try {\n        // Parallel API calls\n        const [summaryRes, monthlySummaryRes, savingsRes] = await Promise.all([\n          axios.get('/transactions/summary'),\n          axios.get('/transactions/monthly-summary'),\n          axios.get('/savings/summary') // Assuming a savings summary endpoint\n        ]);\n\n        const { totalIncome, totalExpenses } = summaryRes.data.data;\n        const { labels, incomeData, expenseData } = monthlySummaryRes.data.data;\n        const totalSavings = savingsRes.data.data.totalSavings || 0;\n\n        setSummary({ totalIncome, totalExpenses, totalSavings });\n\n        setChartData({\n          labels,\n          datasets: [\n            { label: 'Income', data: incomeData, borderColor: '#16a34a', backgroundColor: 'rgba(22, 163, 74, 0.5)' },\n            { label: 'Expenses', data: expenseData, borderColor: '#ef4444', backgroundColor: 'rgba(239, 68, 68, 0.5)' },\n          ],\n        });\n\n      } catch (err) {\n        console.error(err);\n        showNotification('Failed to fetch dashboard data.', 'error');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchDashboardData();\n  }, [showNotification]);\n\n  const totalBalance = summary.totalIncome - summary.totalExpenses;\n\n  if (loading) {\n    return <div className=\"text-center py-8\">Loading dashboard...</div>;\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      <h1 className=\"text-3xl font-bold text-gray-800 dark:text-white\">Dashboard</h1>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <Card className=\"border-l-4 border-blue-500\">\n          <h2 className=\"text-sm font-medium text-gray-500 truncate\">Total Balance</h2>\n          <p className=\"mt-1 text-3xl font-semibold text-gray-900 dark:text-white\">${totalBalance.toFixed(2)}</p>\n        </Card>\n        <Card className=\"border-l-4 border-green-500\">\n          <h2 className=\"text-sm font-medium text-gray-500 truncate\">Total Income</h2>\n          <p className=\"mt-1 text-3xl font-semibold text-green-600\">${summary.totalIncome.toFixed(2)}</p>\n        </Card>\n        <Card className=\"border-l-4 border-red-500\">\n          <h2 className=\"text-sm font-medium text-gray-500 truncate\">Total Expenses</h2>\n          <p className=\"mt-1 text-3xl font-semibold text-red-600\">${summary.totalExpenses.toFixed(2)}</p>\n        </Card>\n        <Card className=\"border-l-4 border-purple-500\">\n          <h2 className=\"text-sm font-medium text-gray-500 truncate\">Total Savings</h2>\n          <p className=\"mt-1 text-3xl font-semibold text-purple-600\">${summary.totalSavings.toFixed(2)}</p>\n        </Card>\n      </div>\n\n      <Card>\n        <h2 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Monthly Income vs. Expense</h2>\n        <div className=\"h-72\">\n          <Line data={chartData} options={{ responsive: true, maintainAspectRatio: false }} />\n        </div>\n      </Card>\n\n      {/* Placeholder for recent transactions or other widgets */}\n    </div>\n  );\n};\n\nexport default DashboardPage;\n"],"mappings":"AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,gBAAgB,CAAE;AACpC,MAAO,CAAAC,IAAI,KAAM,oBAAoB,CACrC,OAASC,IAAI,KAAQ,iBAAiB,CACtC,OACEC,KAAK,GAAI,CAAAC,OAAO,CAChBC,aAAa,CACbC,WAAW,CACXC,YAAY,CACZC,WAAW,CACXC,KAAK,CACLC,OAAO,CACPC,MAAM,KACD,UAAU,CACjB,OAASC,eAAe,KAAQ,gCAAgC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEjEZ,OAAO,CAACa,QAAQ,CACdZ,aAAa,CACbC,WAAW,CACXC,YAAY,CACZC,WAAW,CACXC,KAAK,CACLC,OAAO,CACPC,MACF,CAAC,CAED,KAAM,CAAAO,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAEC,gBAAiB,CAAC,CAAGP,eAAe,CAAC,CAAC,CAC9C,KAAM,CAACQ,OAAO,CAAEC,UAAU,CAAC,CAAGvB,QAAQ,CAAC,CAAEwB,WAAW,CAAE,CAAC,CAAEC,aAAa,CAAE,CAAC,CAAEC,YAAY,CAAE,CAAE,CAAC,CAAC,CAC7F,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAG5B,QAAQ,CAAC,CAAE6B,MAAM,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAC,CACxE,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGhC,QAAQ,CAAC,IAAI,CAAC,CAE5CC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAgC,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrCD,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF;AACA,KAAM,CAACE,UAAU,CAAEC,iBAAiB,CAAEC,UAAU,CAAC,CAAG,KAAM,CAAAC,OAAO,CAACC,GAAG,CAAC,CACpEpC,KAAK,CAACqC,GAAG,CAAC,uBAAuB,CAAC,CAClCrC,KAAK,CAACqC,GAAG,CAAC,+BAA+B,CAAC,CAC1CrC,KAAK,CAACqC,GAAG,CAAC,kBAAkB,CAAE;AAAA,CAC/B,CAAC,CAEF,KAAM,CAAEf,WAAW,CAAEC,aAAc,CAAC,CAAGS,UAAU,CAACM,IAAI,CAACA,IAAI,CAC3D,KAAM,CAAEX,MAAM,CAAEY,UAAU,CAAEC,WAAY,CAAC,CAAGP,iBAAiB,CAACK,IAAI,CAACA,IAAI,CACvE,KAAM,CAAAd,YAAY,CAAGU,UAAU,CAACI,IAAI,CAACA,IAAI,CAACd,YAAY,EAAI,CAAC,CAE3DH,UAAU,CAAC,CAAEC,WAAW,CAAEC,aAAa,CAAEC,YAAa,CAAC,CAAC,CAExDE,YAAY,CAAC,CACXC,MAAM,CACNC,QAAQ,CAAE,CACR,CAAEa,KAAK,CAAE,QAAQ,CAAEH,IAAI,CAAEC,UAAU,CAAEG,WAAW,CAAE,SAAS,CAAEC,eAAe,CAAE,wBAAyB,CAAC,CACxG,CAAEF,KAAK,CAAE,UAAU,CAAEH,IAAI,CAAEE,WAAW,CAAEE,WAAW,CAAE,SAAS,CAAEC,eAAe,CAAE,wBAAyB,CAAC,CAE/G,CAAC,CAAC,CAEJ,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CAClBzB,gBAAgB,CAAC,iCAAiC,CAAE,OAAO,CAAC,CAC9D,CAAC,OAAS,CACRW,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDC,kBAAkB,CAAC,CAAC,CACtB,CAAC,CAAE,CAACZ,gBAAgB,CAAC,CAAC,CAEtB,KAAM,CAAA4B,YAAY,CAAG3B,OAAO,CAACE,WAAW,CAAGF,OAAO,CAACG,aAAa,CAEhE,GAAIM,OAAO,CAAE,CACX,mBAAOf,IAAA,QAAKkC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,sBAAoB,CAAK,CAAC,CACrE,CAEA,mBACEjC,KAAA,QAAKgC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnC,IAAA,OAAIkC,SAAS,CAAC,kDAAkD,CAAAC,QAAA,CAAC,WAAS,CAAI,CAAC,cAE/EjC,KAAA,QAAKgC,SAAS,CAAC,sDAAsD,CAAAC,QAAA,eACnEjC,KAAA,CAACf,IAAI,EAAC+C,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eAC1CnC,IAAA,OAAIkC,SAAS,CAAC,4CAA4C,CAAAC,QAAA,CAAC,eAAa,CAAI,CAAC,cAC7EjC,KAAA,MAAGgC,SAAS,CAAC,2DAA2D,CAAAC,QAAA,EAAC,GAAC,CAACF,YAAY,CAACG,OAAO,CAAC,CAAC,CAAC,EAAI,CAAC,EACnG,CAAC,cACPlC,KAAA,CAACf,IAAI,EAAC+C,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC3CnC,IAAA,OAAIkC,SAAS,CAAC,4CAA4C,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cAC5EjC,KAAA,MAAGgC,SAAS,CAAC,4CAA4C,CAAAC,QAAA,EAAC,GAAC,CAAC7B,OAAO,CAACE,WAAW,CAAC4B,OAAO,CAAC,CAAC,CAAC,EAAI,CAAC,EAC3F,CAAC,cACPlC,KAAA,CAACf,IAAI,EAAC+C,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACzCnC,IAAA,OAAIkC,SAAS,CAAC,4CAA4C,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cAC9EjC,KAAA,MAAGgC,SAAS,CAAC,0CAA0C,CAAAC,QAAA,EAAC,GAAC,CAAC7B,OAAO,CAACG,aAAa,CAAC2B,OAAO,CAAC,CAAC,CAAC,EAAI,CAAC,EAC3F,CAAC,cACPlC,KAAA,CAACf,IAAI,EAAC+C,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eAC5CnC,IAAA,OAAIkC,SAAS,CAAC,4CAA4C,CAAAC,QAAA,CAAC,eAAa,CAAI,CAAC,cAC7EjC,KAAA,MAAGgC,SAAS,CAAC,6CAA6C,CAAAC,QAAA,EAAC,GAAC,CAAC7B,OAAO,CAACI,YAAY,CAAC0B,OAAO,CAAC,CAAC,CAAC,EAAI,CAAC,EAC7F,CAAC,EACJ,CAAC,cAENlC,KAAA,CAACf,IAAI,EAAAgD,QAAA,eACHnC,IAAA,OAAIkC,SAAS,CAAC,wDAAwD,CAAAC,QAAA,CAAC,4BAA0B,CAAI,CAAC,cACtGnC,IAAA,QAAKkC,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnBnC,IAAA,CAACZ,IAAI,EAACoC,IAAI,CAAEb,SAAU,CAAC0B,OAAO,CAAE,CAAEC,UAAU,CAAE,IAAI,CAAEC,mBAAmB,CAAE,KAAM,CAAE,CAAE,CAAC,CACjF,CAAC,EACF,CAAC,EAGJ,CAAC,CAEV,CAAC,CAED,cAAe,CAAAnC,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
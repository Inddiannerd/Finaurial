{"ast":null,"code":"import _objectSpread from\"C:/Users/vansh patel/OneDrive/Desktop/study/sem5/projects/finaurial/finaurial/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import axios from'../utils/axios';import{useNotification}from'../context/NotificationContext';import Card from'../components/Card';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BudgetsPage=()=>{const{showNotification}=useNotification();const[budgets,setBudgets]=useState([]);const[loading,setLoading]=useState(true);const[form,setForm]=useState({category:'',amount:''});const[editingBudget,setEditingBudget]=useState(null);const fetchBudgets=useCallback(async()=>{try{const res=await axios.get('/budgets');setBudgets(res.data.data);}catch(err){showNotification('Failed to fetch budgets','error');}finally{setLoading(false);}},[showNotification]);useEffect(()=>{fetchBudgets();},[fetchBudgets]);const handleChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();const apiCall=editingBudget?axios.put(\"/budgets/\".concat(editingBudget._id),form):axios.post('/budgets',form);try{await apiCall;showNotification(\"Budget \".concat(editingBudget?'updated':'added',\"!\"),'success');setForm({category:'',amount:''});setEditingBudget(null);fetchBudgets();}catch(err){showNotification('Failed to save budget','error');}};const handleEdit=budget=>{setEditingBudget(budget);setForm({category:budget.category,amount:budget.amount});};const handleDelete=async id=>{if(window.confirm('Are you sure?')){try{await axios.delete(\"/budgets/\".concat(id));showNotification('Budget deleted','success');fetchBudgets();}catch(err){showNotification('Failed to delete budget','error');}}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"Budgets\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2 space-y-6\",children:budgets.map(budget=>{const spent=budget.spent||0;const progress=spent/budget.amount*100;const progressColor=progress>100?'bg-red-500':progress>80?'bg-yellow-500':'bg-green-500';return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold\",children:budget.category}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500\",children:[\"Budget: $\",budget.amount.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold\",children:[\"Spent: $\",spent.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(budget),className:\"text-blue-500\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(budget._id),className:\"text-red-500\",children:\"Delete\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(progressColor,\" h-4 rounded-full\"),style:{width:\"\".concat(Math.min(progress,100),\"%\")}})}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-right text-sm mt-1\",children:[progress.toFixed(1),\"%\"]})]})]},budget._id);})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:editingBudget?'Edit Budget':'New Budget'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"category\",placeholder:\"Category\",value:form.category,onChange:handleChange,className:\"w-full p-2 border rounded\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"amount\",placeholder:\"Amount\",value:form.amount,onChange:handleChange,className:\"w-full p-2 border rounded\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-teal-600 text-white py-2 rounded hover:bg-teal-700\",children:editingBudget?'Update':'Add'}),editingBudget&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setEditingBudget(null);setForm({category:'',amount:''});},className:\"w-full bg-gray-300 text-black py-2 rounded mt-2\",children:\"Cancel Edit\"})]})]})})]})]});};export default BudgetsPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","useNotification","Card","jsx","_jsx","jsxs","_jsxs","BudgetsPage","showNotification","budgets","setBudgets","loading","setLoading","form","setForm","category","amount","editingBudget","setEditingBudget","fetchBudgets","res","get","data","err","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","apiCall","put","concat","_id","post","handleEdit","budget","handleDelete","id","window","confirm","delete","children","className","map","spent","progress","progressColor","toFixed","onClick","style","width","Math","min","onSubmit","type","placeholder","onChange","required"],"sources":["C:/Users/vansh patel/OneDrive/Desktop/study/sem5/projects/finaurial/finaurial/src/pages/BudgetsPage.js"],"sourcesContent":["\nimport React, { useState, useEffect, useCallback } from 'react';\nimport axios from '../utils/axios';\nimport { useNotification } from '../context/NotificationContext';\nimport Card from '../components/Card';\n\nconst BudgetsPage = () => {\n  const { showNotification } = useNotification();\n  const [budgets, setBudgets] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [form, setForm] = useState({ category: '', amount: '' });\n  const [editingBudget, setEditingBudget] = useState(null);\n\n  const fetchBudgets = useCallback(async () => {\n    try {\n      const res = await axios.get('/budgets');\n      setBudgets(res.data.data);\n    } catch (err) {\n      showNotification('Failed to fetch budgets', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, [showNotification]);\n\n  useEffect(() => {\n    fetchBudgets();\n  }, [fetchBudgets]);\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const apiCall = editingBudget ? axios.put(`/budgets/${editingBudget._id}`, form) : axios.post('/budgets', form);\n    try {\n      await apiCall;\n      showNotification(`Budget ${editingBudget ? 'updated' : 'added'}!`, 'success');\n      setForm({ category: '', amount: '' });\n      setEditingBudget(null);\n      fetchBudgets();\n    } catch (err) {\n      showNotification('Failed to save budget', 'error');\n    }\n  };\n\n  const handleEdit = (budget) => {\n    setEditingBudget(budget);\n    setForm({ category: budget.category, amount: budget.amount });\n  };\n\n  const handleDelete = async (id) => {\n    if (window.confirm('Are you sure?')) {\n      try {\n        await axios.delete(`/budgets/${id}`);\n        showNotification('Budget deleted', 'success');\n        fetchBudgets();\n      } catch (err) {\n        showNotification('Failed to delete budget', 'error');\n      }\n    }\n  };\n\n  if (loading) return <div>Loading...</div>;\n\n  return (\n    <div className=\"space-y-6\">\n      <h1 className=\"text-3xl font-bold\">Budgets</h1>\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"md:col-span-2 space-y-6\">\n          {budgets.map(budget => {\n            const spent = budget.spent || 0;\n            const progress = (spent / budget.amount) * 100;\n            const progressColor = progress > 100 ? 'bg-red-500' : progress > 80 ? 'bg-yellow-500' : 'bg-green-500';\n            return (\n              <Card key={budget._id}>\n                <div className=\"flex justify-between items-start\">\n                  <div>\n                    <h2 className=\"text-xl font-bold\">{budget.category}</h2>\n                    <p className=\"text-gray-500\">Budget: ${budget.amount.toFixed(2)}</p>\n                    <p className=\"font-semibold\">Spent: ${spent.toFixed(2)}</p>\n                  </div>\n                  <div className=\"space-x-2\">\n                    <button onClick={() => handleEdit(budget)} className=\"text-blue-500\">Edit</button>\n                    <button onClick={() => handleDelete(budget._id)} className=\"text-red-500\">Delete</button>\n                  </div>\n                </div>\n                <div className=\"mt-4\">\n                  <div className=\"w-full bg-gray-200 rounded-full h-4\">\n                    <div className={`${progressColor} h-4 rounded-full`} style={{ width: `${Math.min(progress, 100)}%` }}></div>\n                  </div>\n                  <p className=\"text-right text-sm mt-1\">{progress.toFixed(1)}%</p>\n                </div>\n              </Card>\n            );\n          })}\n        </div>\n        <div>\n          <Card>\n            <h2 className=\"text-xl font-bold mb-4\">{editingBudget ? 'Edit Budget' : 'New Budget'}</h2>\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <input type=\"text\" name=\"category\" placeholder=\"Category\" value={form.category} onChange={handleChange} className=\"w-full p-2 border rounded\" required />\n              <input type=\"number\" name=\"amount\" placeholder=\"Amount\" value={form.amount} onChange={handleChange} className=\"w-full p-2 border rounded\" required />\n              <button type=\"submit\" className=\"w-full bg-teal-600 text-white py-2 rounded hover:bg-teal-700\">{editingBudget ? 'Update' : 'Add'}</button>\n              {editingBudget && <button type=\"button\" onClick={() => { setEditingBudget(null); setForm({ category: '', amount: '' }); }} className=\"w-full bg-gray-300 text-black py-2 rounded mt-2\">Cancel Edit</button>}\n            </form>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BudgetsPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}